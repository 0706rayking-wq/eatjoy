<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å»šæˆ¿ç®¡ç†ç³»çµ± Kitchen OS</title>
    <!-- å¼•å…¥è³‡æºï¼šReact, ReactDOM, Babel, Tailwind CSS, Lucide -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .page-enter { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 pb-12">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;
        const { 
            Bell, BookOpen, ShieldCheck, Camera, Menu, Settings, Calendar, Plus, Trash2, 
            Lock, LogOut, X, User, CalendarDays, ArrowLeft, ChevronRight, Bus, Bike, 
            PlayCircle, Flame, HardHat, RefreshCcw, ClipboardCheck, Loader2, XCircle, Send, ImageIcon,
            Navigation: NavIcon, MapPin, Car, Coins, Shirt, Heart, Clock, Users
        } = lucide;

        // --- æ ¸å¿ƒé…ç½® ---
        const ZONES = [
            { id: 'beverage', name: 'é£²èª¿å€' }, { id: 'light-meal', name: 'è¼•é£Ÿå€' },
            { id: 'seafood', name: 'æµ·é®®å€' }, { id: 'vegetable', name: 'è”¬èœå€' },
            { id: 'meat', name: 'åˆ‡è‚‰å€' }, { id: 'cold-platter', name: 'å†·ç›¤å€' },
            { id: 'cooked-food', name: 'ç†Ÿé£Ÿå€' }, { id: 'soup', name: 'æ¹¯å“å€' }
        ];

        // åœ–ç¤ºåŒ…è£çµ„ä»¶
        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                if (window.lucide) { window.lucide.createIcons(); }
            }, [name, size, className]);
            return <i data-lucide={name} className={className} style={{ width: size, height: size, display: 'inline-block' }}></i>;
        };

        const ChefHatIcon = () => (
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2.5" fill="none" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"/>
                <line x1="6" y1="17" x2="18" y2="17"/>
            </svg>
        );

        // --- å®Œæ•´å®ˆå‰‡è³‡æ–™ ---
        const RULES_DATA = {
            hygiene: [
                { category: "é«”æª¢è¦ç¯„", rules: ["å¾æ¥­äººå“¡å¥åº·æª¢æŸ¥æ‡‰åŒ…æ‹¬èƒ¸éƒ¨Xå…‰åŠAå‹è‚ç‚æŠ—é«”æª¢é©—ã€‚"] },
                { category: "é£Ÿæé›¢åœ°æ”¾ç½®", rules: ["é£Ÿææ‡‰é›¢ç‰†5å…¬åˆ†ï¼Œé›¢åœ°20å…¬åˆ†ã€‚"] },
                { category: "é¿å…äº¤å‰æ±¡æŸ“", rules: ["åˆ‡è£½é£Ÿæç §æ¿ã€åˆ€å…·ã€æ¨è»Šã€å®¹å™¨æ‡‰ç”Ÿç†Ÿé£Ÿå€åˆ†ã€‚", "å†·è—ã€å†·å‡ä¿å­˜é£Ÿç‰©æ™‚æ‡‰ç”Ÿç†Ÿé£Ÿåˆ†é–‹ã€‚", "ç¢ºä¿é›™æ‰‹æ´—æ·¨å†è§¸ç¢°é£Ÿæã€‚", "éé£Ÿæå‹¿ç½®æ”¾è‡³ç §æ¿ä¸Šã€‚", "é£ŸææœªåŠ å°åŠ è“‹ä¸‹è«‹å‹¿äº¤ç–Šã€‚"] },
                { category: "å…ˆé€²å…ˆå‡º", rules: ["å†°ç®±é£Ÿæå®œæ‰“æ¨™ã€å¡«å¯«æ—¥æœŸã€å§“åä»¥åˆ©å…ˆé€²å…ˆå‡ºã€‚", "ä¸‹ç­å‰é ˆå°‡å†·å‡å†·è—åŠä¹¾å€‰æ•´ç†æ•´é½Šã€‚"] },
                { category: "åŠ å°åŠ è“‹", rules: ["é¿å…é£Ÿææ±™æŸ“æˆ–ç•°å‘³ï¼Œæ¨™ç¤ºé–‹å°æ—¥æœŸã€‚", "éµç½é–‹å°å¾Œéœ€åˆ†è£ï¼Œé¿å…ç”Ÿé½é€ æˆæ±¡æŸ“ã€‚"] },
                { category: "ä¿å­˜æº«åº¦", rules: ["ç´°èŒå®¹æ˜“å­³ç”Ÿæº«åº¦ç‚º16~59åº¦ã€‚è™•ç†é£Ÿæå®œå……åˆ†åŠ ç†±/ä¿å†°ã€‚", "è½å¯¦å¡«å¯«æº«åº¦è¨˜éŒ„è¡¨ã€‚", "å†·å‡å†·è—è²¨å“å„ªå…ˆè™•ç†ã€‚"] },
                { category: "ç’°å¢ƒè¡›ç”Ÿ", rules: ["å®¹å™¨æ´—å®Œå€’æ‰£é¿å…æ»‹ç”Ÿç´°èŒã€‚", "å»šé¤˜åƒåœ¾ç¢ºå¯¦åˆ†é¡ã€‚", "ä¸Ÿæ£„é£Ÿæè«‹å‘ŠçŸ¥ä¸»ç®¡ã€‚"] }
            ],
            occupational: [
                { category: "ä¸€ã€åˆ‡è‚‰æ©Ÿæ“ä½œæ³¨æ„äº‹é …", rules: ["1. æ“ä½œå‰ç¢ºèªè­·ç½©å®Œå¥½,é›»æºç·šç„¡ç ´æã€‚","2. ç©©å›ºæ“ºæ”¾ã€‚","3. åš´ç¦å¾’æ‰‹æ¥è§¸æ—‹è½‰åˆ€ç‰‡,é ˆä½¿ç”¨æ¨è‚‰æ¿ã€‚","4. ç¦æ­¢ç›´æ¥æ“¦æ‹­åˆ€åˆƒã€‚","5. ç¦æ­¢ç©¿å¯¬é¬†è¡£ç‰©æˆ–ä½©æˆ´æ‰‹é£¾ã€‚","6. æ¸…æ½”æ™‚å¿…é ˆé—œæ©Ÿä¸¦æ‹”é™¤é›»æºã€‚"] },
                { category: "äºŒã€åˆ‡è”¥æ©Ÿæ“ä½œæ³¨æ„äº‹é …", rules: ["1. é–‹æ©Ÿå‰ç¢ºèªåˆ€ç‰‡é–ç·Šã€‚","2. ä¸å¯ä¸€æ¬¡æŠ•å…¥éå¤šã€‚","3. æ¸…æ½”æˆ–æ’é™¤ç•°ç‰©å¿…é ˆæ‹”é›»ã€‚","4. ä¿æŒåˆ€å£é‹’åˆ©ã€‚"] },
                { category: "ä¸‰ã€ç¢å†°æ©Ÿæ“ä½œæ³¨æ„äº‹é …", rules: ["1. ç©©å›ºå¹³å°ã€‚","2. ç¢ºèªé›»æºé—œé–‰å†æŠ•å†°ã€‚","3. åš´ç¦å¾’æ‰‹ä¼¸å…¥æŠ•å…¥å£ã€‚"] },
                { category: "å››ã€èª¿ç†æ©Ÿ/æ”ªæ‹Œæ©Ÿ", rules: ["1. æ¯é«”çµåˆç‰¢å›ºå†é–‹æ©Ÿã€‚","2. å‹¿è¶…éæœ€é«˜æ°´ä½ã€‚","3. åš´ç¦æ‰“é–‹ä¸Šè“‹ä¼¸æ‰‹é€²å…¥ã€‚"] },
                { category: "äº”ã€å‡è³ªæ©Ÿæ³¨æ„äº‹é …", rules: ["1. ç¢ºèªå£“åŠ›é–¥èˆ‡ç®¡ç·šå¯†å°ã€‚","2. é‹è½‰ä¸­åš´ç¦é–‹è“‹ã€‚","3. å‡è³ªçµæŸå…ˆé‡‹å£“ã€‚"] },
                { category: "å…­ã€å†·å‡åº«å®‰å…¨", rules: ["1. é€²å…¥é€šçŸ¥åŒäº‹ã€‚","2. ç¢ºèªé€ƒç”Ÿè£ç½®æ­£å¸¸ã€‚","3. ç¦æ­¢é•·æ™‚é€—ç•™ã€‚"] },
                { category: "ä¸ƒã€ç“¦æ–¯çˆæ“ä½œ", rules: ["1. é–‹ç“¦æ–¯â†’é»ç«â†’é—œç«â†’é—œç“¦æ–¯ã€‚","2. æ¼æ°£ç«‹å³é€šé¢¨ã€‚","3. ç¦æ­¢ç„¡äººæ™‚é–‹ç«ã€‚","4. é›œç‰©è·ç«æº30å…¬åˆ†ã€‚"] },
                { category: "å…«ã€è’¸çƒ¤ç®±æ³¨æ„äº‹é …", rules: ["1. æ³¨æ„é˜²ç‡™,ç”¨é˜²ç†±æ‰‹å¥—ã€‚","2. ä¸å¯ç›´æ¥æ½‘æ°´å…§éƒ¨ã€‚","3. é–‹é–€å…ˆé€€å¾Œä¸€æ­¥ã€‚"] },
                { category: "ä¹ã€å…¶ä»–å®‰å…¨äº‹é …", rules: ["1. åœ°é¢ä¿æŒä¹¾ç‡¥ã€ç©¿å®‰å…¨é‹ã€‚","2. é›»å™¨ç¨ç«‹æ’åº§ã€‚","3. åˆ€å…·é›†ä¸­ã€åˆ€å°–å‘ä¸‹ã€‚","4. ç†Ÿæ‚‰æ»…ç«å™¨ã€‚"] }
            ],
            standard: [
                { id: 1, text: "ä¾è¦å®šè«‹å‡èˆ‡æ‰“å¡", sub: "ä¸Šç­é²åˆ°éœ€ä¾æŒ‡ç¤ºåˆ·å¡ã€‚ä¸Šå´—å‰è‘—è£ã€ç½®ç‰©å®Œç•¢å¾Œå†æ‰“å¡ã€‚" },
                { id: 2, text: "åƒåœ¾åˆ†é¡", sub: "åƒåœ¾ã€å›æ”¶ã€å»šé¤˜åˆ†é–‹ã€‚ä¾ç™¾è²¨æŒ‡ç¤ºã€‚" },
                { id: 3, text: "æ‰‹æ©Ÿä½¿ç”¨é™åˆ¶", sub: "ç¦æ­¢éå¹¹éƒ¨ä¸Šç­æ™‚é–“ä½¿ç”¨æ‰‹æ©Ÿ,ç™¼ç¾ä¸€ç‡æ‡²è™•ã€‚" },
                { id: 4, text: "ä¾ç…§SOPç‡Ÿé‹", sub: "å„å€éœ€ç†ŸçŸ¥ä¾›æ‡‰å“é …,èœå€ä¾è¦æ ¼è£åˆ‡ã€‚" },
                { id: 5, text: "ä¸‹å´—å‰å®Œæˆ", sub: "é€±æ¸…ã€é»è²¨ã€æ•´ç†å†°ç®±ä¸‹å´—å‰å®Œæˆã€‚" },
                { id: 6, text: "é£Ÿæé€šå ±", sub: "ä¿å­˜ä¸ç•¶æˆ–ä¸Ÿæ£„é£Ÿææ‡‰å‘ŠçŸ¥ä¸»ç®¡ã€‚" },
                { id: 7, text: "å–„å¾Œè½å¯¦äº¤æ¥", sub: "ä¾ç…§å–„å¾Œè¡¨æ”¶å°¾,ç•™æ„æ°´é›»ç“¦æ–¯é—œé–‰ã€‚" },
                { id: 8, text: "è²¡ç”¢å…¬ç‰©æ„›è­·", sub: "ä¸ç›œå–æˆ–ç ´å£å…¬ç‰©ã€‚æœªç¶“å…è¨±ç¦æ­¢ç§æ‹¿é£Ÿææ‹›å¾…å‹äººã€‚" },
                { id: 9, text: "ç¦è¸é…’æª³æ¦”", sub: "åš´æ ¼ç¦æ­¢é€²å…¥å»šæˆ¿å€åŸŸã€‚" },
                { id: 10, text: "æœè£å„€å®¹èˆ‡å¦‚å»", sub: "ç©¿åˆ¶æœã€å¸½å­ã€å®‰å…¨é‹ã€‚å¦‚å»é™6åˆ†é˜,ç‰¹æ®Šéœ€æ±‚å‘ŠçŸ¥ä¸»ç®¡ã€‚" },
                { id: 11, text: "ç¶­è­·å·¥ä½œå®‰å…¨", sub: "ç¦æ­¢å¬‰æˆ²ã€ä¸å¯å¸¶ä»–äººé€²å»šæˆ¿ã€ä¸ååœ¨æª¯é¢ä¸Šã€‚" },
                { id: 12, text: "æˆæœ¬æ§åˆ¶", sub: "ç¦æ­¢æ“…è‡ªçƒ¹ç…®æˆ–ç§è‡ªå«è²¨ã€‚" },
                { id: 13, text: "æ³¨æ„å°ˆæ¥­å½¢è±¡", sub: "ä¸ç”¨å®¢ç”¨é¤å…·ã€‚ç¦æ­¢æ–¼å®¢äººé¢å‰çˆ­åŸ·ã€‚" },
                { id: 14, text: "é€šé“å‡ºå£æš¢é€š", sub: "éç½®ç‰©å€ä¸å¾—å †æ”¾ç§äººç‰©å“ã€‚" }
            ]
        };

        const App = () => {
            const [currentPage, setCurrentPage] = useState('auth');
            const [isManager, setIsManager] = useState(false);
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [passwordInput, setPasswordInput] = useState('');
            const [loginError, setLoginError] = useState(false);

            // --- æ•¸æ“šæŒä¹…åŒ– ---
            const [users, setUsers] = useState(() => JSON.parse(localStorage.getItem('k_users')) || []);
            const [currentUser, setCurrentUser] = useState(() => JSON.parse(localStorage.getItem('k_curr_user')) || null);
            const [announcements, setAnnouncements] = useState(() => JSON.parse(localStorage.getItem('k_ann')) || [
                { id: 1, date: '2024-05-20', title: 'æ­¡è¿ä½¿ç”¨ Kitchen OS', content: 'ç³»çµ±æœƒå“¡åŠŸèƒ½å·²ä¸Šç·šï¼Œè«‹è¨»å†Šå¾Œè¯ç¹«ä¸»ç®¡å¯©æ ¸ã€‚', author: 'ç³»çµ±' }
            ]);
            const [schedules, setSchedules] = useState(() => JSON.parse(localStorage.getItem('k_sch')) || {});
            const [standards, setStandards] = useState(() => JSON.parse(localStorage.getItem('k_std')) || {});
            const [completedZones, setCompletedZones] = useState(() => JSON.parse(localStorage.getItem('k_done')) || []);
            const [lastResetDate, setLastResetDate] = useState(localStorage.getItem('k_reset_date') || "");
            const [notificationLog, setNotificationLog] = useState([]);
            const [selectedAnnouncement, setSelectedAnnouncement] = useState(null);
            const [selectedRuleCategory, setSelectedRuleCategory] = useState(null);

            useEffect(() => {
                localStorage.setItem('k_users', JSON.stringify(users));
                localStorage.setItem('k_curr_user', JSON.stringify(currentUser));
                localStorage.setItem('k_ann', JSON.stringify(announcements));
                localStorage.setItem('k_sch', JSON.stringify(schedules));
                localStorage.setItem('k_std', JSON.stringify(standards));
                localStorage.setItem('k_done', JSON.stringify(completedZones));
            }, [users, currentUser, announcements, schedules, standards, completedZones]);

            // è‡ªå‹•é‡ç½® (19:00)
            useEffect(() => {
                const timer = setInterval(() => {
                    const now = new Date();
                    if (now.getHours() === 19 && now.getMinutes() === 0 && lastResetDate !== now.toDateString()) {
                        setCompletedZones([]);
                        setLastResetDate(now.toDateString());
                        localStorage.setItem('k_reset_date', now.toDateString());
                        addNotify("ğŸ® ç³»çµ±é€²åº¦å·²è‡ªå‹•é‡ç½®ã€‚");
                    }
                }, 30000);
                return () => clearInterval(timer);
            }, [lastResetDate]);

            const addNotify = (msg) => {
                const time = new Date().toLocaleTimeString();
                setNotificationLog(prev => [{ time, message: msg }, ...prev].slice(0, 10));
            };

            const handleLogin = () => {
                if (passwordInput === 'eatjoy0706') {
                    setIsManager(true);
                    setShowLoginModal(false);
                    setPasswordInput('');
                    setLoginError(false);
                    setCurrentPage('home');
                } else { setLoginError(true); }
            };

            const logout = () => {
                setCurrentUser(null);
                setIsManager(false);
                setCurrentPage('auth');
            };

            // è·¯ç”±æ§åˆ¶é‚è¼¯
            if (!currentUser && !isManager && currentPage !== 'auth') {
                return <AuthPage setUsers={setUsers} users={users} setCurrentUser={setCurrentUser} setCurrentPage={setCurrentPage} />;
            }
            if (currentUser && currentUser.status === 'pending' && !isManager) {
                return <PendingPage onLogout={logout} />;
            }

            const renderContent = () => {
                switch(currentPage) {
                    case 'auth': return <AuthPage setUsers={setUsers} users={users} setCurrentUser={setCurrentUser} setCurrentPage={setCurrentPage} />;
                    case 'home': return <HomePage onNavigate={setCurrentPage} announcements={announcements} doneCount={completedZones.length} onOpen={(a) => { setSelectedAnnouncement(a); setCurrentPage('annDetail'); }} />;
                    case 'onboarding': return <OnboardingPage onBack={() => setCurrentPage('home')} onNavigate={setCurrentPage} />;
                    case 'workRoute': return <WorkRoutePage onBack={() => setCurrentPage('onboarding')} />;
                    case 'rules': return <RulesPage onBack={() => setCurrentPage('home')} onSelect={(c) => { setSelectedRuleCategory(c); setCurrentPage('ruleDetail'); }} />;
                    case 'ruleDetail': return <RuleDetailPage category={selectedRuleCategory} onBack={() => setCurrentPage('rules')} />;
                    case 'benefits': return <BenefitsPage onBack={() => setCurrentPage('home')} />;
                    case 'schedule': return <SchedulePage onBack={() => setCurrentPage('home')} schedules={schedules} />;
                    case 'inspection': return <InspectionPage onBack={() => setCurrentPage('home')} standards={standards} completedZones={completedZones} setCompletedZones={setCompletedZones} addLog={addNotify} />;
                    case 'annDetail': return <AnnDetail ann={selectedAnnouncement} onBack={() => setCurrentPage('home')} />;
                    case 'admin': return <AdminPage onBack={() => setCurrentPage('home')} onLogout={logout} announcements={announcements} setAnnouncements={setAnnouncements} schedules={schedules} setSchedules={setSchedules} standards={standards} setStandards={setStandards} users={users} setUsers={setUsers} logs={notificationLog} />;
                    default: return <HomePage onNavigate={setCurrentPage} announcements={announcements} doneCount={completedZones.length} onOpen={(a) => { setSelectedAnnouncement(a); setCurrentPage('annDetail'); }} />;
                }
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <header className={`${isManager ? 'bg-slate-800' : 'bg-orange-600'} text-white p-4 sticky top-0 z-50 flex justify-between items-center shadow-lg transition-colors`}>
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setCurrentPage('home')}>
                            <div className="bg-white/20 p-1 rounded-lg"><ChefHatIcon /></div>
                            <span className="font-bold text-xl tracking-tight leading-none">Kitchen OS</span>
                        </div>
                        <div className="flex gap-3">
                            <button onClick={() => isManager ? setCurrentPage('admin') : setShowLoginModal(true)}>
                                {isManager ? <Icon name="settings" size={22} /> : <Icon name="menu" size={22} />}
                            </button>
                            {currentUser && <button onClick={logout} className="p-1"><Icon name="log-out" size={20} /></button>}
                        </div>
                    </header>

                    <div className="flex-grow">{renderContent()}</div>

                    {showLoginModal && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-6 text-center">
                            <div className="bg-white w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl page-transition">
                                <div className="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-orange-600"><Icon name="lock" size={32} /></div>
                                <h2 className="text-2xl font-black mb-6 tracking-tight">ä¸»ç®¡æ§åˆ¶ä¸­å¿ƒ</h2>
                                <div className="space-y-4">
                                    <input type="password" value={passwordInput} onChange={(e) => setPasswordInput(e.target.value)} placeholder="ç®¡ç†å¯†ç¢¼" className={`w-full bg-slate-100 border-2 ${loginError ? 'border-red-400' : 'border-transparent'} focus:border-orange-500 rounded-2xl px-5 py-4 outline-none font-bold text-center mb-4`} onKeyDown={(e) => e.key === 'Enter' && handleLogin()} />
                                    <button onClick={handleLogin} className="w-full bg-orange-600 text-white font-black py-4 rounded-2xl shadow-xl active:scale-95 transition-all">é€²å…¥å¾Œå°</button>
                                    <button onClick={() => setShowLoginModal(false)} className="mt-4 text-slate-400 text-xs font-bold uppercase tracking-widest">å–æ¶ˆ</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- çµ„ä»¶ï¼šèªè­‰èˆ‡ç­‰å¾…é  ---

        const AuthPage = ({ setUsers, users, setCurrentUser, setCurrentPage }) => {
            const [phone, setPhone] = useState('');
            const [name, setName] = useState('');
            const [mode, setMode] = useState('login');

            const handleAuth = () => {
                if (!phone) return;
                if (mode === 'register') {
                    if (users.find(u => u.phone === phone)) return alert('æ­¤è™Ÿç¢¼å·²è¨»å†Šé');
                    const newUser = { phone, name, status: 'pending' };
                    setUsers([...users, newUser]);
                    setCurrentUser(newUser);
                } else {
                    const user = users.find(u => u.phone === phone);
                    if (user) {
                        setCurrentUser(user);
                        if (user.status === 'approved') setCurrentPage('home');
                    } else {
                        alert('å¸³è™Ÿä¸å­˜åœ¨ï¼Œè«‹å…ˆè¨»å†Š');
                        setMode('register');
                    }
                }
            };

            return (
                <div className="p-6 pt-20 text-center page-enter">
                    <div className="bg-orange-100 w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6 text-orange-600 shadow-lg shadow-orange-100"><ChefHatIcon /></div>
                    <h2 className="text-3xl font-black text-slate-800 mb-2">åŒä»æœå‹™ç³»çµ±</h2>
                    <p className="text-slate-400 text-sm mb-10 uppercase tracking-widest font-bold">Membership Access</p>
                    <div className="bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-100 space-y-4">
                        <div className="flex bg-slate-100 p-1 rounded-2xl mb-4">
                            <button onClick={() => setMode('login')} className={`flex-1 py-3 rounded-xl font-bold text-sm ${mode === 'login' ? 'bg-white text-orange-600 shadow-sm' : 'text-slate-400'}`}>ç™»å…¥</button>
                            <button onClick={() => setMode('register')} className={`flex-1 py-3 rounded-xl font-bold text-sm ${mode === 'register' ? 'bg-white text-orange-600 shadow-sm' : 'text-slate-400'}`}>è¨»å†Š</button>
                        </div>
                        {mode === 'register' && <input type="text" placeholder="çœŸå¯¦å§“å" className="w-full bg-slate-50 p-4 rounded-2xl outline-none focus:ring-2 focus:ring-orange-500 font-bold" value={name} onChange={e => setName(e.target.value)} />}
                        <input type="tel" placeholder="æ‰‹æ©Ÿè™Ÿç¢¼" className="w-full bg-slate-50 p-4 rounded-2xl outline-none focus:ring-2 focus:ring-orange-500 font-bold tracking-widest text-center" value={phone} onChange={e => setPhone(e.target.value)} />
                        <button onClick={handleAuth} className="w-full bg-slate-900 text-white font-black py-4 rounded-2xl shadow-lg active:scale-95 transition-all">{mode === 'register' ? 'ç”³è«‹è¨»å†Š' : 'ç™»å…¥ç³»çµ±'}</button>
                    </div>
                </div>
            );
        };

        const PendingPage = ({ onLogout }) => (
            <div className="p-10 pt-32 text-center space-y-6 page-enter">
                <div className="w-24 h-24 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mx-auto animate-pulse"><Icon name="clock" size={40} /></div>
                <h3 className="text-2xl font-black text-slate-800">å¸³è™Ÿå¯©æ ¸ä¸­</h3>
                <p className="text-slate-500 text-sm leading-relaxed">æ‚¨çš„ç”³è«‹å·²æäº¤ï¼Œè«‹å‘ŠçŸ¥ä¸»ç®¡æ ¸å‡†æ‰‹æ©Ÿè™Ÿç¢¼ã€‚<br/>å¯©æ ¸é€šéå‰ç„¡æ³•è§€çœ‹å…§éƒ¨è³‡æ–™ã€‚</p>
                <button onClick={onLogout} className="text-slate-300 font-bold text-xs uppercase tracking-widest border-b border-slate-200 pb-1">ç™»å‡º</button>
            </div>
        );

        // --- å­çµ„ä»¶ï¼šé¦–é èˆ‡å°è¦½ ---

        const HomePage = ({ onNavigate, announcements, doneCount, onOpen }) => (
            <div className="p-4 space-y-6 page-enter">
                <div className="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100 flex items-center justify-between">
                    <div className="flex items-center gap-4">
                        <div className="w-12 h-12 bg-orange-100 text-orange-600 rounded-2xl flex items-center justify-center font-black text-xl">{doneCount}</div>
                        <div>
                            <p className="text-[10px] font-black text-slate-300 uppercase tracking-widest leading-none mb-1">ä»Šæ—¥é€²åº¦</p>
                            <p className="text-sm font-black text-slate-700 leading-tight">{doneCount === ZONES.length ? "âœ… ä»Šæ—¥å…¨æ•¸å®Œæˆ" : `å°šæœ‰ ${ZONES.length - doneCount} ç«™å¾…è™•ç†`}</p>
                        </div>
                    </div>
                    <button onClick={() => onNavigate('inspection')} className="p-3 bg-orange-600 text-white rounded-2xl shadow-lg"><Icon name="camera" size={20}/></button>
                </div>
                <section className="grid grid-cols-2 gap-4">
                    <NavCard title="å…¥è·ç›¸é—œ" onClick={() => onNavigate('onboarding')} bg="bg-blue-50/50" />
                    <NavCard title="å“¡å·¥å®ˆå‰‡" onClick={() => onNavigate('rules')} bg="bg-emerald-50/50" />
                    <NavCard title="è–ªè³‡ç¦åˆ©" onClick={() => onNavigate('benefits')} bg="bg-yellow-50/50" />
                    <NavCard title="æ¯æœˆç­è¡¨" onClick={() => onNavigate('schedule')} bg="bg-indigo-50/50" />
                    <NavCard title="å–„å¾Œå·¡è¦–ç³»çµ±" onClick={() => onNavigate('inspection')} bg="bg-orange-50" span={true} />
                </section>
                <section>
                    <h2 className="text-lg font-bold flex items-center gap-2 mb-3 px-1 text-slate-400"><Icon name="bell" size={18} className="text-orange-500" /> æœ€æ–°å…¬å‘Š</h2>
                    <div className="space-y-3">
                        {announcements.slice(0, 3).map(ann => (
                            <div key={ann.id} onClick={() => onOpen(ann)} className="bg-white p-5 rounded-[2rem] shadow-sm border-l-4 border-orange-500 active:bg-orange-50 cursor-pointer"><h3 className="font-bold text-slate-800 text-sm leading-tight">{ann.title}</h3><p className="text-xs text-slate-400 line-clamp-2 mt-1 leading-relaxed">{ann.content}</p></div>
                        ))}
                    </div>
                </section>
            </div>
        );

        const NavCard = ({ title, onClick, bg, span = false }) => (
            <button onClick={onClick} className={`${bg} ${span ? 'col-span-2 py-16' : 'py-14'} rounded-[2.5rem] shadow-sm border border-slate-100 active:scale-95 transition-all text-center`}>
                <span className="font-black text-slate-800 text-2xl tracking-tighter uppercase leading-none">{title}</span>
            </button>
        );

        // --- ä¸»ç®¡å¾Œå° (åˆ†é¡ç®¡ç†) ---
        const AdminPage = ({ onBack, onLogout, announcements, setAnnouncements, schedules, setSchedules, standards, setStandards, users, setUsers, logs }) => {
            const [tab, setTab] = useState('members');
            const [annT, setAnnT] = useState(''); const [annC, setAnnC] = useState('');
            const [month, setMonth] = useState(new Date().toISOString().slice(0, 7));
            const [stdZone, setStdZone] = useState(ZONES[0].id);

            const approveUser = (phone) => setUsers(users.map(u => u.phone === phone ? { ...u, status: 'approved' } : u));
            const deleteUser = (phone) => setUsers(users.filter(u => u.phone !== phone));

            return (
                <div className="p-4 pb-24 space-y-6 page-enter">
                    <div className="flex justify-between items-center">
                        <div onClick={onBack} className="p-2 bg-white rounded-xl shadow-sm border cursor-pointer"><Icon name="arrow-left" /></div>
                        <h2 className="text-xl font-black">æ§åˆ¶ä¸­å¿ƒ</h2>
                        <button onClick={onLogout} className="bg-red-50 text-red-500 px-4 py-2 rounded-full font-black text-[10px]">LOGOUT</button>
                    </div>

                    <div className="flex gap-2 overflow-x-auto no-scrollbar pb-2">
                        {[
                            { id: 'members', name: 'æˆå“¡å¯©æ ¸', icon: 'users' },
                            { id: 'content', name: 'å…¬å‘Šç®¡ç†', icon: 'bell' },
                            { id: 'schedules', name: 'ç­è¡¨ç®¡ç†', icon: 'calendar' },
                            { id: 'safety', name: 'æ¨™æº–ç…§ç‰‡', icon: 'camera' },
                            { id: 'logs', name: 'ç³»çµ±æ—¥èªŒ', icon: 'send' }
                        ].map(t => (
                            <button key={t.id} onClick={() => setTab(t.id)} className={`px-5 py-3 rounded-2xl font-black text-xs shrink-0 flex items-center gap-2 transition-all ${tab === t.id ? 'bg-orange-600 text-white shadow-lg' : 'bg-white text-slate-400'}`}>
                                <Icon name={t.icon} size={14}/> {t.name}
                            </button>
                        ))}
                    </div>

                    {tab === 'members' && (
                        <div className="space-y-3">
                            {users.map(u => (
                                <div key={u.phone} className="bg-white p-5 rounded-[2rem] border border-slate-100 flex justify-between items-center shadow-sm">
                                    <div><p className="font-black text-slate-800 leading-none mb-1">{u.name}</p><p className="text-[10px] text-slate-400 font-bold tracking-widest">{u.phone}</p></div>
                                    <div className="flex gap-2">
                                        {u.status === 'pending' ? <button onClick={() => approveUser(u.phone)} className="bg-emerald-500 text-white px-4 py-2 rounded-xl text-[10px] font-black">æ ¸å‡†</button> : <span className="text-[9px] font-black text-emerald-500 bg-emerald-50 px-2 py-1 rounded-lg">å·²é€šé</span>}
                                        <button onClick={() => deleteUser(u.phone)} className="p-2 text-slate-200 hover:text-red-500"><Icon name="trash-2" size={16}/></button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    {tab === 'content' && (
                        <div className="space-y-4">
                            <div className="bg-white p-6 rounded-[2rem] border shadow-sm">
                                <input placeholder="æ¨™é¡Œ" value={annT} onChange={e => setAnnT(e.target.value)} className="w-full bg-slate-50 p-4 rounded-2xl mb-3 outline-none font-bold text-sm" />
                                <textarea placeholder="å…§å®¹" rows="3" value={annC} onChange={e => setAnnC(e.target.value)} className="w-full bg-slate-50 p-4 rounded-2xl mb-4 outline-none text-sm" />
                                <button onClick={() => { if(annT && annC) { setAnnouncements([{ id: Date.now(), date: new Date().toISOString().slice(0,10), title: annT, content: annC, author: "ä¸»ç®¡" }, ...announcements]); setAnnT(''); setAnnC(''); } }} className="w-full bg-orange-600 text-white font-black py-4 rounded-2xl active:scale-95 shadow-xl">ç™¼å¸ƒå…¬å‘Š</button>
                            </div>
                            {announcements.map(a => <div key={a.id} className="bg-white p-4 rounded-2xl flex justify-between items-center border"><span className="font-bold text-xs truncate mr-4">{a.title}</span><button onClick={() => setAnnouncements(announcements.filter(x => x.id !== a.id))}><Icon name="trash-2" size={16} className="text-slate-200" /></button></div>)}
                        </div>
                    )}

                    {tab === 'schedules' && (
                        <div className="space-y-4">
                            <div className="bg-white p-6 rounded-[2rem] border shadow-sm">
                                <div className="flex gap-2 mb-4"><input type="month" value={month} onChange={(e) => setMonth(e.target.value)} className="flex-1 bg-slate-50 p-3 rounded-xl font-bold outline-none text-sm" /><label className="bg-blue-600 text-white px-5 py-3 rounded-xl text-[10px] font-black cursor-pointer uppercase active:scale-95 shadow-lg">Upload<input type="file" multiple className="hidden" onChange={(e) => { const files = Array.from(e.target.files); files.forEach(file => { const r = new FileReader(); r.onloadend = () => setSchedules(p => ({ ...p, [month]: [...(p[month] || []), r.result] })); r.readAsDataURL(file); }); }}/></label></div>
                                <div className="grid grid-cols-4 gap-2">{(schedules[month] || []).map((img, i) => <div key={i} className="relative aspect-square shadow-inner"><img src={img} className="w-full h-full object-cover rounded-xl border shadow-sm" /><button onClick={() => setSchedules(p => ({...p, [month]: p[month].filter((_, idx) => idx !== i)}))} className="absolute -top-1 -right-1 bg-red-500 text-white p-1 rounded-full shadow-lg"><Icon name="trash-2" size={10}/></button></div>)}</div>
                            </div>
                        </div>
                    )}

                    {tab === 'safety' && (
                        <div className="space-y-4">
                            <div className="bg-white p-6 rounded-[2rem] border shadow-sm">
                                <select value={stdZone} onChange={(e) => setStdZone(e.target.value)} className="w-full bg-slate-50 p-4 rounded-2xl font-bold text-sm outline-none mb-4">{ZONES.map(z => <option key={z.id} value={z.id}>{z.name}</option>)}</select>
                                <label className="bg-slate-900 text-white w-full py-4 rounded-2xl text-[11px] font-black cursor-pointer uppercase text-center block shadow-xl">ä¸Šå‚³æ¨™æº–ç…§<input type="file" multiple className="hidden" onChange={(e) => { const files = Array.from(e.target.files); files.forEach(file => { const r = new FileReader(); r.onloadend = () => setStandards(prev => ({ ...prev, [stdZone]: [...(prev[stdZone] || []), r.result] })); r.readAsDataURL(file); }); }}/></label>
                                <div className="grid grid-cols-4 gap-2 mt-6">{(standards[stdZone] || []).map((img, i) => <div key={i} className="relative aspect-square shadow-inner"><img src={img} className="w-full h-full object-cover rounded-xl border" /><button onClick={() => setStandards(p => ({...p, [stdZone]: p[stdZone].filter((_, idx) => idx !== i)}))} className="absolute -top-1 -right-1 bg-red-500 text-white p-1 rounded-full shadow-lg"><Icon name="trash-2" size={10}/></button></div>)}</div>
                            </div>
                        </div>
                    )}

                    {tab === 'logs' && (
                        <div className="bg-white p-6 rounded-[2rem] shadow-sm border space-y-2">
                            {logs.length === 0 ? <p className="text-slate-300 italic text-center py-10">No recent activity.</p> : logs.map((l, i) => <div key={i} className="text-[10px] bg-slate-50 p-2 rounded-lg font-bold shadow-sm"><span className="text-orange-400 mr-2">[{l.time}]</span> {l.message}</div>)}
                        </div>
                    )}
                </div>
            );
        };

        // --- å…¶é¤˜éœæ…‹åˆ†é  ---

        const OnboardingPage = ({ onBack, onNavigate }) => (
            <div className="p-4 space-y-4 page-enter">
                <BackButton onClick={onBack} title="å…¥è·ç›¸é—œ" />
                <div className="space-y-3">
                    <SectionItem title="å“¡å·¥å…¥è·æº–å‚™æ¸…å–®" iconName="book-open" />
                    <SectionItem title="åœè»Šè³‡è¨Š" iconName="car" />
                    <div onClick={() => onNavigate('workRoute')}><SectionItem title="ä¸Šç­å‹•ç·šæŒ‡å¼•" iconName="map-pin" /></div>
                </div>
            </div>
        );

        const WorkRoutePage = ({ onBack }) => (
            <div className="p-4 space-y-6 page-enter pb-10">
                <BackButton onClick={onBack} title="ä¸Šç­å‹•ç·šæŒ‡å¼•" />
                <section className="bg-white rounded-[2.5rem] p-6 shadow-sm border border-slate-100">
                    <div className="flex items-center gap-3 mb-4 text-slate-700"><div className="bg-blue-100 p-2 rounded-xl text-blue-600"><Icon name="bus" size={20} /></div><h3 className="font-black">æ­ä¹˜å¤§çœ¾é‹è¼¸è·¯ç·š</h3></div>
                    <div className="aspect-video bg-slate-100 rounded-3xl flex flex-col items-center justify-center border-2 border-dashed border-slate-200"><Icon name="play-circle" size={40} className="text-slate-300 mb-2" /><p className="text-[10px] font-black text-slate-400 italic text-center uppercase tracking-widest">Video Placeholder</p></div>
                </section>
                <section className="bg-white rounded-[2.5rem] p-6 shadow-sm border border-slate-100">
                    <div className="flex items-center gap-3 mb-4 text-slate-700"><div className="bg-orange-100 p-2 rounded-xl text-orange-600"><Icon name="bike" size={20} /></div><h3 className="font-black">é–‹è»Šæˆ–é¨è»Šè·¯ç·š</h3></div>
                    <div className="aspect-video bg-slate-100 rounded-3xl flex flex-col items-center justify-center border-2 border-dashed border-slate-200"><Icon name="play-circle" size={40} className="text-slate-300 mb-2" /><p className="text-[10px] font-black text-slate-400 italic text-center uppercase tracking-widest">Video Placeholder</p></div>
                </section>
            </div>
        );

        const RulesPage = ({ onBack, onSelect }) => (
            <div className="p-4 space-y-3 page-enter">
                <BackButton onClick={onBack} title="å“¡å·¥å®ˆå‰‡" />
                <SectionItem title="é£Ÿå“è¡›ç”Ÿå®‰å…¨è¦ç¯„" iconName="shield-check" onClick={() => onSelect('hygiene')} />
                <SectionItem title="è·å ´è·æ¥­å®‰å…¨å®ˆå‰‡" iconName="flame" onClick={() => onSelect('occupational')} />
                <SectionItem title="å»šæˆ¿æ¨™æº–å·¥ä½œå®ˆå‰‡" iconName="book-open" onClick={() => onSelect('standard')} />
            </div>
        );

        const RuleDetailPage = ({ category, onBack }) => {
            const data = useMemo(() => {
                if(category === 'hygiene') return { title: "é£Ÿå“è¡›ç”Ÿå®‰å…¨è¦ç¯„", content: RULES_DATA.hygiene.map((c, i) => <RuleBlock key={i} index={i+1} title={c.category} items={c.rules} />) };
                if(category === 'occupational') return { title: "è·å ´è·æ¥­å®‰å…¨å®ˆå‰‡", content: RULES_DATA.occupational.map((c, i) => <RuleBlock key={i} index={i+1} title={c.category} items={c.rules} />) };
                return { title: "å»šæˆ¿æ¨™æº–å·¥ä½œå®ˆå‰‡", content: RULES_DATA.standard.map(c => <RuleStandardBlock key={c.id} id={c.id} title={c.text} desc={c.sub} />) };
            }, [category]);
            return <div className="p-4 space-y-4 page-enter pb-10"><BackButton onClick={onBack} title={data.title} />{data.content}</div>;
        };

        const RuleBlock = ({ index, title, items }) => (
            <div className="bg-white rounded-3xl p-6 shadow-sm border border-slate-100 mb-4 shadow-orange-50"><h3 className="font-bold text-slate-800 mb-2 text-sm">{title}</h3><ul className="space-y-1">{items.map((it, idx) => <li key={idx} className="text-xs text-slate-500">â€¢ {it}</li>)}</ul></div>
        );

        const RuleStandardBlock = ({ id, title, desc }) => (
            <div className="bg-white rounded-3xl p-6 shadow-sm border border-slate-100 mb-4 flex gap-4 shadow-blue-50"><div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-black shrink-0">{id}</div><div className="space-y-1"><h3 className="font-bold text-slate-800 text-sm leading-tight">{title}</h3><p className="text-[10px] text-slate-400 italic bg-slate-50 p-2 rounded-lg leading-relaxed">{desc}</p></div></div>
        );

        const SchedulePage = ({ onBack, schedules }) => {
            const currentMonth = new Date().toISOString().slice(0, 7);
            const [viewMonth, setViewMonth] = useState(currentMonth);
            const imgs = schedules[viewMonth] || [];
            return (
                <div className="p-4 space-y-6 page-enter pb-20">
                    <BackButton onClick={onBack} title="æ¯æœˆç­è¡¨æŸ¥è©¢" />
                    <div className="bg-white p-4 rounded-3xl shadow-sm border flex items-center justify-between mb-4 shadow-sm"><input type="month" value={viewMonth} onChange={(e) => setViewMonth(e.target.value)} className="bg-slate-50 p-2 rounded-xl font-bold outline-none border-0" /><span className="text-[9px] font-black text-slate-300 uppercase">Selected</span></div>
                    <div className="space-y-4">{imgs.length > 0 ? imgs.map((img, i) => <div key={i} className="bg-white p-2 rounded-3xl shadow-md border mb-4 shadow-orange-50"><img src={img} className="w-full rounded-2xl shadow-inner" /></div>) : (<div className="bg-white p-12 rounded-[2.5rem] border-2 border-dashed border-slate-100 text-center space-y-4 text-slate-200 font-black italic tracking-widest py-20 uppercase">No Data Uploaded</div>)}</div>
                </div>
            );
        };

        const InspectionPage = ({ onBack, standards, completedZones, setCompletedZones, addLog }) => {
            const [activeZone, setActiveZone] = useState(null);
            const [uploads, setUploads] = useState([]);
            const [loading, setLoading] = useState(false);
            const [result, setResult] = useState(null);
            const handleFile = (e) => { const files = Array.from(e.target.files); files.forEach(file => { const reader = new FileReader(); reader.onloadend = () => setUploads(prev => [...prev, reader.result]); reader.readAsDataURL(file); }); };
            const runAI = () => {
                setLoading(true);
                setTimeout(() => {
                    const pass = Math.random() > 0.1;
                    setResult({ status: pass ? 'PASS' : 'FAIL', summary: pass ? "å–„å¾Œåˆæ ¼,æ¡Œé¢æ•´æ½”ã€‚" : "éœ€æ”¹é€²,åœ°é¢å°šæœ‰ç©æ°´ã€‚" });
                    if(pass && !completedZones.includes(activeZone.id)) {
                        const newList = [...completedZones, activeZone.id];
                        setCompletedZones(newList);
                        if(newList.length === ZONES.length) addLog("âœ… ä»Šæ—¥å…¨å“¡å®Œæˆä¸Šå‚³ï¼è«‹ä¸»ç®¡è¤‡æŸ¥ã€‚");
                    }
                    setLoading(false);
                }, 1500);
            };
            if(activeZone) return (
                <div className="p-4 space-y-6 page-enter pb-20"><button onClick={() => { setActiveZone(null); setResult(null); setUploads([]); }} className="p-3 bg-white rounded-2xl shadow-sm border border-slate-100"><Icon name="arrow-left" size={20}/></button><h3 className="text-4xl font-black text-slate-800 text-center tracking-tighter uppercase">{activeZone.name}</h3><section><p className="text-xs font-black text-slate-300 uppercase mb-3 text-center">Standard Ref</p><div className="flex gap-2 overflow-x-auto no-scrollbar pb-2">{(standards[activeZone.id] || []).map((img, i) => <img key={i} src={img} className="w-32 h-32 object-cover rounded-3xl border-2 border-white shadow-sm" />)}</div></section><section className="bg-white p-8 rounded-[3rem] shadow-sm border border-slate-100 text-center"><div className="grid grid-cols-3 gap-3 mb-8">{uploads.map((img, i) => <div key={i} className="relative aspect-square"><img src={img} className="w-full h-full object-cover rounded-2xl" /><button onClick={() => setUploads(u => u.filter((_, idx) => idx !== i))} className="absolute -top-2 -right-2 bg-red-500 text-white p-1 rounded-full shadow-lg"><Icon name="x" size={10}/></button></div>)}<label className="aspect-square bg-slate-50 border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition-all"><Icon name="plus" size={18} className="text-slate-300"/><input type="file" multiple className="hidden" onChange={handleFile} /></label></div><button onClick={runAI} disabled={loading || uploads.length === 0} className={`w-full py-5 rounded-[2rem] font-black text-lg shadow-xl flex items-center justify-center gap-2 ${loading || uploads.length === 0 ? 'bg-slate-100 text-slate-300' : 'bg-orange-600 text-white active:scale-95'}`}>{loading ? <Icon name="loader-2" className="animate-spin" /> : <><Icon name="send" size={18}/> å•Ÿå‹• AI åˆ¤å®š</>}</button></section>
                {result && <div className={`p-8 rounded-[3rem] border-4 ${result.status === 'PASS' ? 'bg-emerald-50 border-emerald-100' : 'bg-red-50 border-red-100'} animate-in slide-in-from-bottom duration-500`}><h4 className="text-2xl font-black mb-2 text-center uppercase tracking-tighter">{result.status === 'PASS' ? 'åˆ¤å®šåˆæ ¼' : 'éœ€æ”¹å–„'}</h4><p className="text-sm font-bold text-slate-600 text-center">{result.summary}</p></div>}</div>
            );
            return (
                <div className="p-4 space-y-4 page-enter pb-20"><BackButton onClick={onBack} title="å–„å¾Œå·¡è¦–ç³»çµ±" /><div className="bg-gradient-to-r from-orange-500 to-orange-400 p-6 rounded-[2.5rem] text-white shadow-lg flex justify-between items-center mb-4 font-black"><div>Progress {completedZones.length} / {ZONES.length}</div><div>{Math.round((completedZones.length/ZONES.length)*100)}%</div></div><div className="grid grid-cols-1 gap-2">{ZONES.map(z => { const done = completedZones.includes(z.id); return <button key={z.id} onClick={() => setActiveZone(z)} className={`bg-white px-6 py-6 rounded-[2rem] shadow-sm flex justify-between items-center border transition-all ${done ? 'border-emerald-100 bg-emerald-50/20' : 'border-slate-100'}`}><div className="flex items-center gap-3"><div className={`p-2 rounded-xl ${done ? 'bg-emerald-100 text-emerald-600' : 'bg-slate-50 text-slate-300'}`}><Icon name={done ? 'check-circle-2' : 'camera'} size={18}/></div><span className="font-black text-slate-700">{z.name}</span></div>{done ? <span className="text-[9px] font-black text-emerald-500 uppercase tracking-widest">DONE</span> : <Icon name="chevron-right" size={18} className="text-slate-200" />}</button> })}</div></div>
            );
        };

        const BackButton = ({ onClick, title }) => (
            <div className="flex items-center gap-4 mb-8"><button onClick={onClick} className="p-3 bg-white rounded-2xl shadow-sm border border-slate-100 active:scale-90 transition-transform"><Icon name="arrow-left" size={20}/></button><h2 className="text-2xl font-black text-slate-800 tracking-tighter leading-tight">{title}</h2></div>
        );
        const SectionItem = ({ title, iconName, onClick }) => (
            <div onClick={onClick} className="bg-white p-6 rounded-[2rem] flex items-center justify-between shadow-sm border border-slate-100 active:bg-slate-50 cursor-pointer group transition-all"><div className="flex items-center gap-4 text-slate-400 group-active:text-orange-50">{iconName && <Icon name={iconName} size={18} />}<span className="font-bold text-slate-700 text-sm leading-none">{title}</span></div><Icon name="chevron-right" size={18} className="text-slate-200" /></div>
        );
        const BenefitsPage = ({ onBack }) => <div className="p-4 space-y-4 page-enter pb-20"><BackButton onClick={onBack} title="è–ªè³‡ç¦åˆ©" /><div className="bg-gradient-to-br from-yellow-400 to-orange-500 p-8 rounded-[2.5rem] text-white shadow-lg mb-6 shadow-orange-100 font-black"><p className="text-[10px] opacity-80 mb-1">ä¼°è¨ˆè–ªè³‡é ç®—</p><p className="text-3xl">$ 32,800 +</p></div><SectionItem title="å„å€è€ƒæ ¸åŠ çµ¦æ¨™æº–" iconName="coins" /><SectionItem title="å“¡å·¥ç›¸é—œç¦åˆ©" iconName="heart" /></div>;
        const AnnDetail = ({ ann, onBack }) => (
            <div className="p-4 page-enter pb-10"><BackButton onClick={onBack} title="å…¬å‘Šè©³æƒ…" /><div className="bg-white rounded-[2.5rem] p-8 shadow-sm border border-slate-100 min-h-[40vh] mb-6 shadow-orange-50 font-medium leading-relaxed"><h1 className="text-2xl font-black text-slate-800 mb-2 tracking-tight">{ann?.title}</h1><p className="text-[10px] text-slate-400 font-bold mb-8 uppercase tracking-widest">{ann?.date} â€¢ posted by {ann?.author}</p><div className="text-sm text-slate-600 leading-relaxed">{ann?.content}</div></div><button onClick={onBack} className="w-full py-4 bg-slate-900 text-white font-black rounded-2xl shadow-xl active:scale-95 transition-all">è¿”å›é¦–é </button></div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
